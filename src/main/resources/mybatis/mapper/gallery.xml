<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="gallery">
  <select id="count" resultType="string">
  	SELECT count(gallery_id) 
  	  FROM zipdoc.tbl_gallery;
  </select> 
  <select id="lists" resultType="map" parameterType="map">
	SELECT 	gallery_id AS galleryid,
			gallery_watcher AS watcher,
			gallery_favor AS favor,
			gallery_clip AS clip,
			gallery_title AS title,
			gallery_addr AS addr,
			gallery_size AS size,
			gallery_type AS type,
			gallery_cost AS cost,
			gallery_terms AS terms,
			gallery_method AS method,
			gallery_partnerid AS partnerid
  	FROM zipdoc.tbl_gallery 
  	ORDER BY gallery_id ASC
  	LIMIT #{startIndex}, #{viewItems}
  </select>
  <select id="mainimg" resultType="map" parameterType="map">
  	select 	gallery_id as galleryid, gallery_imgs as mainimg 
  	  from 	zipdoc.tbl_gallery_imgs 
  	 where 	gallery_main_img=true 
  	 limit 	#{startIndex}, #{viewItems};
  </select>
  <select id="imgs" resultType="map" parameterType="int">
  	select gallery_id as galleryid , gallery_imgs as galleryimgs 
  	from tbl_gallery_imgs 
  	where gallery_id=#{galleryId};
  </select>
  <select id="detailsinfo" resultType="map" parameterType="int">
  	select 
		tbl_gallery.gallery_id as galleryid, 
		tbl_gallery.gallery_watcher as watcher,
		tbl_gallery.gallery_type as type,
		tbl_gallery.gallery_addr as addr,
		tbl_gallery.gallery_title as title,
		tbl_gallery.gallery_terms as terms,
		tbl_gallery.gallery_size as size,
		tbl_gallery.gallery_partnerid as partnerid,
		tbl_gallery.gallery_method as method,
		tbl_gallery.gallery_id as galleryid,
		tbl_gallery.gallery_favor as favor,
		tbl_gallery.gallery_cost as cost,
		tbl_gallery.gallery_clip as clip,
		tbl_partners.partners_name as partnername
	from tbl_gallery inner join tbl_partners
  	where tbl_gallery.gallery_id=#{galleryId};
  </select>
  <select id="partner" resultType="map" parameterType="int">
 	select 
		tbl_partners.partners_id as partnerid,
		tbl_partners.partners_name as partnername,
		tbl_partners.partners_img as partnerimg,
	   	tbl_partners.partners_major as partnermajor,
	   	tbl_partners.partners_name as partnername,
	   	tbl_partners.partners_range as partnerrange,
	   	tbl_partners.partners_specialty as partnerspecialty
	from tbl_gallery 
	left join tbl_partners 
	on (tbl_gallery.gallery_partnerid = tbl_partners.partners_id)
	where tbl_gallery.gallery_id=#{galleryId};
 </select>
  
</mapper>